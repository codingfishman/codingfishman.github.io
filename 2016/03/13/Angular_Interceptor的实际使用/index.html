<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="codingfishman.github.io"><title>Angular Http Interceptor 的应用笔记 | codingfishman</title><link rel="stylesheet" type="text/css" href="/css/normalize.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="/css/pure-min.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="/css/grids-responsive-min.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.5.0/css/font-awesome.min.css"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">Angular Http Interceptor 的应用笔记</h1><a id="logo" href="/.">codingfishman</a><p class="description">细雨湿衣看不见，闲花落地听无声</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">Angular Http Interceptor 的应用笔记</h1><div class="post-meta">Mar 13, 2016<script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> Hits</span></span></div><a data-disqus-identifier="2016/03/13/Angular_Interceptor的实际使用/" href="/2016/03/13/Angular_Interceptor的实际使用/#disqus_thread" class="disqus-comment-count"></a><div class="post-content"><p>之前做Java的时候，一旦遇到要登录拦截的情形，总会用到Filter。请求在到达controller之前，先经过filter，进行登录验证，然后再决定放行。前端开发也会有类似的场景，Http请求中通用的附加处理就是一种，而Angular原生的interceptor已经提供了支持。我在工作中也有一些用到它的地方，于是上来做个笔记。</p>
<h2 id="HttpProvider和它的Interceptor"><a href="#HttpProvider和它的Interceptor" class="headerlink" title="HttpProvider和它的Interceptor"></a>HttpProvider和它的Interceptor</h2><p>Angular的HttpProvider原生支持拦截器（interceptor），可以在请求发出和被接受之前做相应处理。在官网的API文档介绍中，有如下示例</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// register the interceptor as a service</span></span><br><span class="line">$provide.factory(<span class="string">'myHttpInterceptor'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">$q, dependency1, dependency2</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="comment">// optional method</span></span><br><span class="line">    <span class="string">'request'</span>: <span class="function"><span class="keyword">function</span>(<span class="params">config</span>) </span>&#123;</span><br><span class="line">      <span class="comment">// do something on success</span></span><br><span class="line">      <span class="keyword">return</span> config;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// optional method</span></span><br><span class="line">   <span class="string">'requestError'</span>: <span class="function"><span class="keyword">function</span>(<span class="params">rejection</span>) </span>&#123;</span><br><span class="line">      <span class="comment">// do something on error</span></span><br><span class="line">      <span class="keyword">if</span> (canRecover(rejection)) &#123;</span><br><span class="line">        <span class="keyword">return</span> responseOrNewPromise</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> $q.reject(rejection);</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// optional method</span></span><br><span class="line">    <span class="string">'response'</span>: <span class="function"><span class="keyword">function</span>(<span class="params">response</span>) </span>&#123;</span><br><span class="line">      <span class="comment">// do something on success</span></span><br><span class="line">      <span class="keyword">return</span> response;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// optional method</span></span><br><span class="line">   <span class="string">'responseError'</span>: <span class="function"><span class="keyword">function</span>(<span class="params">rejection</span>) </span>&#123;</span><br><span class="line">      <span class="comment">// do something on error</span></span><br><span class="line">      <span class="keyword">if</span> (canRecover(rejection)) &#123;</span><br><span class="line">        <span class="keyword">return</span> responseOrNewPromise</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> $q.reject(rejection);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">$httpProvider.interceptors.push(<span class="string">'myHttpInterceptor'</span>);</span><br></pre></td></tr></table></figure>
<p>实际中我主要用到过 <em>request</em> 、 <em>response</em> 和 <em>responseError</em>。</p>
<h2 id="Request使用"><a href="#Request使用" class="headerlink" title="Request使用"></a>Request使用</h2><h3 id="API请求路径的通用修正"><a href="#API请求路径的通用修正" class="headerlink" title="API请求路径的通用修正"></a>API请求路径的通用修正</h3><p>也不知道为什么，从接触到interceptor的那天起，第一个想到的场景就是ajax请求中的URL。在最开始写ajax的时候，借助的是jQuery, 请求的URL直接放到调用参数中去，觉得这一切，怎么说呢，还挺好的哈？但随着前后端的分离，后端工程师在开发或后面维护API的过程中，或者由于其他的原因，URL会发生变更。拿我的经历来说，后端是一个独立的系统，同时服务于APP和web，后端的API命名是和业务直接关联的，在命名上，只会停留在 <code>/user/login</code>, 而我们在调用的时候，这样是不太直观的，所以会变成 <code>/api/user/login</code>，将来也有可能变成 <code>/somethingelse/user/login</code>。</p>
<p>而这样做还有一个好处，就是方便Nginx做跳转。通过proxy_pass, 将所有 <code>/api/</code> 的请求代理到真实的后台API。</p>
<blockquote>
<p>后台API的URL甚至可能有端口，但这一切都被Nginx处理掉了，对于前后段分离来说，这样既可以避免跨域请求，又可以让请求显得更加规范</p>
</blockquote>
<h3 id="封装共有请求参数"><a href="#封装共有请求参数" class="headerlink" title="封装共有请求参数"></a>封装共有请求参数</h3><p>这个是比较常见的，在和后台请求过程中除了每个API单独的参数，还会附带一些基本参数，比如认证的token（对于基于Token而不是Session的后端）和用于统计的其他信息。如果是每个单独加相信大家都不会愿意，于是我们可能写一个共有的方法，在里面附件共有参数（也可以更改API的请求路径），这些不借助Angular也可以做到，只是我们要记得每次都调用这个公用方法。</p>
<h3 id="设置请求超时时间"><a href="#设置请求超时时间" class="headerlink" title="设置请求超时时间"></a>设置请求超时时间</h3><p>为ajax请求设置通用的超时时间，而且还可以为上传请求单独配置更长的超时时间</p>
<p>这些都可以放到 <code>request</code> 中来，如下代码是只是一个例子：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">angular.module(<span class="string">'app.common'</span>)</span><br><span class="line">    .factory(<span class="string">'RequestInterceptor'</span>, RequestInterceptor)</span><br><span class="line"></span><br><span class="line">  RequestInterceptor.$inject = [<span class="string">'$rootScope'</span>, <span class="string">'Constants'</span>]</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">RequestInterceptor</span>(<span class="params">$rootScope, Constants</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//过滤掉所有类似 /static/**/** 的路径，只对API请求作过滤</span></span><br><span class="line">    <span class="keyword">var</span> _notStaticUrlReg = <span class="regexp">/^\/(?!static\/).*$/i</span></span><br><span class="line">    <span class="keyword">var</span> interceptor = &#123;</span><br><span class="line">      <span class="string">'request'</span>: <span class="function"><span class="keyword">function</span>(<span class="params">config</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (config.url.match(_notStaticUrlReg)) &#123;</span><br><span class="line">          <span class="keyword">var</span> data = config.data</span><br><span class="line">          <span class="keyword">if</span> (!data) &#123;</span><br><span class="line">            data = config.data = &#123;&#125;</span><br><span class="line">          &#125;</span><br><span class="line"></span><br><span class="line">          <span class="comment">//重新组装API，将所有的请求加入API的项目基本路径，如果已经包含路径则不再添加</span></span><br><span class="line">          <span class="comment">//from '/user/login' TO '/api/url/login'</span></span><br><span class="line">          <span class="keyword">if</span> (config.url &amp;&amp; config.url.indexOf(Constants.ApiBasePath) &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            config.url = Constants.ApiBasePath + config.url</span><br><span class="line">          &#125;</span><br><span class="line"></span><br><span class="line">          <span class="comment">// 注入认证信息</span></span><br><span class="line">          data.authentication = &#123;&#125;</span><br><span class="line"></span><br><span class="line">          <span class="comment">// 设置请求超时时间</span></span><br><span class="line">          config.headers[<span class="string">'cache-control'</span>] = <span class="string">'no-cache'</span></span><br><span class="line">          config.timeout = <span class="number">30000</span></span><br><span class="line"></span><br><span class="line">          <span class="comment">//如果是上传api，超时时间加长</span></span><br><span class="line">          <span class="keyword">if</span> (config.url.indexOf(<span class="string">'/file/upload'</span>) &gt; -<span class="number">1</span>) &#123;</span><br><span class="line">            config.timeout = <span class="number">100000</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> config</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> interceptor</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<h2 id="Response的使用"><a href="#Response的使用" class="headerlink" title="Response的使用"></a>Response的使用</h2><h3 id="通用的请求错误判断"><a href="#通用的请求错误判断" class="headerlink" title="通用的请求错误判断"></a>通用的请求错误判断</h3><p>如果在请求过程中认证信息过期（这个其实是可以避免的，在发起ajax请求前的页面应该做hasLogin的验证，目前没有这个验证才加上来），会返回403的错误码，或者一些其他代表认证信息过期的错误码，在response中通过这个来进行判断。</p>
<p>在上面的代码基础上，增加 <code>response: function ()</code> 模块</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> interceptor = &#123;</span><br><span class="line">  <span class="string">'request'</span>: <span class="function"><span class="keyword">function</span> (<span class="params">config</span>) </span>&#123;&#125;, <span class="comment">// 此处省略</span></span><br><span class="line">  <span class="string">'response'</span>: <span class="function"><span class="keyword">function</span> (<span class="params">_response</span>) </span>&#123; <span class="comment">// **为和不就叫response？此处有坑**</span></span><br><span class="line"></span><br><span class="line">      <span class="keyword">var</span> status = _response.status</span><br><span class="line">      <span class="keyword">if</span> (status === <span class="number">403</span> || status === <span class="number">401</span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> _path = $location.path()</span><br><span class="line">        $rootScope.$emit(<span class="string">'root.needsLogin'</span>)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">var</span> url = _response.config.url</span><br><span class="line">        <span class="keyword">var</span> data = _response.data</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 依然只对api做处理，静态资源的URL不做处理</span></span><br><span class="line">        <span class="keyword">if</span> (url &amp;&amp; url.match(_notStaticUrlReg)) &#123;</span><br><span class="line"></span><br><span class="line">          <span class="comment">// 如果请求过程中发现信息过期，广播该事件</span></span><br><span class="line">          <span class="keyword">if</span> (data &amp;&amp; data.code === <span class="string">'auth_failed'</span> ) &#123;</span><br><span class="line">            $rootScope.$emit(<span class="string">'root.needsLogin'</span>)</span><br><span class="line">          &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">return</span> _response</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>_response 的坑</strong><br>前面提到过，在response的参数命名中为何不直接取名<code>response</code> 就好呢？这是在使用 <a href="https://github.com/danialfarid/ng-file-upload)" target="_blank" rel="external">ng-file-upload-shim</a>的时候遇到的。 <em>ng-file-upload-shim</em> 在IE8、IE9下会通过 <a href="https://github.com/mailru/FileAPI" target="_blank" rel="external">FileAPI</a> 调用Flash来上传，可喜的是，这个请求仍然会被Angular的http处理，故而interceptor也是可以用在这里的。但是我遇到了一个奇怪的问题，在IE上面，FileAPI的请求，其response（拦截器中的参数）为<strong>undefined</strong>，然而实际上后台是有返回的，而且FileAPI其自己也可以获取到。但是断点进去，response就是undefined。但我看到debug面板老是出现”_response”的变量，以为是浏览器自己的重命名。抱着试一试的态度，我把参数改成_response，有值了！ 难道在这时候，response变量和浏览器发生了冲突，被浏览器直接写为undefined？</p>
</blockquote>
<h2 id="ResponseError的使用"><a href="#ResponseError的使用" class="headerlink" title="ResponseError的使用"></a>ResponseError的使用</h2><h3 id="自动重新请求"><a href="#自动重新请求" class="headerlink" title="自动重新请求"></a>自动重新请求</h3><p>最开始需要用到这个的时候，是因为一个莫名奇妙的<em>请求被丢弃</em>错误，一个普通的ajax请求，在某一台手机上，经常莫名奇妙的发生请求被丢弃故而报错，其请求完全没有到达超时的限制（请求超时后会被丢弃），尝试过不少但都没能找到根本原因，最后想到了一个暴力的方法，自动重新请求！</p>
<p>通过判断返回的<strong>状态码是否等于0</strong> 来判断该请求是否被丢弃，重试指定的次数。这个次数放在哪呢？我是放在response的config对象中，方便每次都能得到上一次的状态，而且只和这个response有关。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 还是接上面的构造代码，只是加入 `responseError:function() &#123;&#125;`</span></span><br><span class="line">  <span class="keyword">var</span> interceptor = &#123;</span><br><span class="line">    <span class="string">'request'</span>: <span class="function"><span class="keyword">function</span> (<span class="params">config</span>) </span>&#123;&#125;, <span class="comment">// 此处省略</span></span><br><span class="line">    <span class="string">'response'</span>: <span class="function"><span class="keyword">function</span> (<span class="params">_response</span>) </span>&#123;&#125;, <span class="comment">// 此处省略</span></span><br><span class="line">    <span class="string">'responseError'</span>: <span class="function"><span class="keyword">function</span> (<span class="params">_response</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (_response.status === <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> abortingHandler(_response)</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="comment">//对aborted的request 进行重新请求</span></span><br><span class="line">      <span class="function"><span class="keyword">function</span> <span class="title">abortingHandler</span>(<span class="params">_response</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//如果是静态资源，则不作处理</span></span><br><span class="line">        <span class="keyword">if</span> (!_response.config.url.match(_notStaticUrlReg)) &#123;</span><br><span class="line">          <span class="keyword">return</span> $q.reject(_response)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> $http = $injector.get(<span class="string">'$http'</span>)</span><br><span class="line">        <span class="keyword">var</span> _config = _response.config</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">typeof</span> _config.triedTimes !== <span class="string">'undefined'</span>) &#123;</span><br><span class="line">          _config.triedTimes++</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          _config.triedTimes = <span class="number">1</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (_config.triedTimes &lt; <span class="number">3</span>) &#123;</span><br><span class="line">          <span class="keyword">return</span> $http(_config)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="keyword">return</span> $q.reject(_response)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<h2 id="后话"><a href="#后话" class="headerlink" title="后话"></a>后话</h2><p>在实践 angular interceptor的过程中，这篇博客帮助了我很多，推荐大家可以去看看, <a href="http://www.webdeveasy.com/interceptors-in-angularjs-and-useful-examples/" target="_blank" rel="external">传送门</a>。以上只是我自己用的一些简单配置，如有局限或不对之处，还请见谅和指正。</p>
<p>最近也开始使用react，感觉虽然react自己说学习他只需要一个react，可是在实际项目，尤其是企业级的项目中，只靠react一个是远远不够的。这时候，redux，react-router放上来都是最基本的配置。然后在实际过程中，对于类似angular interceptor的内容，我用的就是一个共有方法封装=_=，对于Http Mock使用的是<a href="https://github.com/jakerella/jquery-mockjax" target="_blank" rel="external">mockjax</a>。</p>
</div><a data-url="http://codingfishman.github.io/2016/03/13/Angular_Interceptor的实际使用/" data-id="cimf0c6ep0000c32q83e5i97f" class="article-share-link">分享到</a><div class="tags"><a href="/tags/angular-javascript/">angular javascript</a></div><div class="post-nav"><a href="/2016/03/17/记webpack与CSS在一起所遇到的奇怪现象/" class="pre">记webpack与CSS在一起所遇到的奇怪现象</a><a href="/2016/02/21/flex布局与float的冲突/" class="next">flex布局与float的冲突</a></div><div id="disqus_thread"><script>var disqus_shortname = 'codingfishman';
var disqus_identifier = '2016/03/13/Angular_Interceptor的实际使用/';
var disqus_title = 'Angular Http Interceptor 的应用笔记';
var disqus_url = 'http://codingfishman.github.io/2016/03/13/Angular_Interceptor的实际使用/';
(function() {
  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//codingfishman.disqus.com/count.js" async></script></div></div></div></div><div class="pure-u-1-4"><div id="sidebar"><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/angular-javascript/" style="font-size: 15px;">angular javascript</a> <a href="/tags/webpack-css-css-modules/" style="font-size: 15px;">webpack css css-modules</a> <a href="/tags/CSS-CSS3-H5-Mobile/" style="font-size: 15px;">CSS CSS3 H5 Mobile</a> <a href="/tags/CSS3-flex-Mobile/" style="font-size: 15px;">CSS3 flex Mobile</a> <a href="/tags/日记/" style="font-size: 15px;">日记</a> <a href="/tags/react/" style="font-size: 15px;">react</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最新文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2016/03/30/React_PropTypes_类型笔记/">React PropTypes 到底有多少类型</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/03/17/记webpack与CSS在一起所遇到的奇怪现象/">记webpack与CSS在一起所遇到的奇怪现象</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/03/13/Angular_Interceptor的实际使用/">Angular Http Interceptor 的应用笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/02/21/flex布局与float的冲突/">flex布局与float的冲突</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/02/21/禁用手机触屏时那一瞬间的背景色/">禁用手机触屏时那一瞬间的背景色</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/02/21/firstblog/">firstblog</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-comment-o"> 最近评论</i></div><script type="text/javascript" src="//codingfishman.disqus.com/recent_comments_widget.js?num_items=5&amp;hide_avatars=1&amp;avatar_size=32&amp;excerpt_length=20&amp;hide_mods=1"></script></div></div></div></div><div id="footer">© <a href="/." rel="nofollow">codingfishman.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/jquery.min.js?v=0.0.0"></script><script type="text/javascript" src="/js/totop.js?v=0.0.0"></script><script type="text/javascript" src="/js/fancybox.pack.js?v=0.0.0"></script><script type="text/javascript" src="/js/jquery.fancybox.js?v=0.0.0"></script><link rel="stylesheet" type="text/css" href="/css/jquery.fancybox.css?v=0.0.0"><script type="text/javascript" src="/js/share.js?v=0.0.0"></script><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>